# 创建录制配置<a name="live_03_0018"></a>

## 功能介绍<a name="section1167881306150255"></a>

创建录制配置接口。

## 调试<a name="section16915194413135"></a>

您可以在[API Explorer](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=Live&api=CreateRecordConfig)中直接运行调试该接口。

## URI<a name="section49255221150255"></a>

POST /v1/\{project\_id\}/record/config

**表 1**  路径参数

<a name="table1664315620418"></a>
<table><thead align="left"><tr id="row96431961749"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p4643156641"><a name="p4643156641"></a><a name="p4643156641"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.2"><p id="p1364318618413"><a name="p1364318618413"></a><a name="p1364318618413"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p06441465414"><a name="p06441465414"></a><a name="p06441465414"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p146441863418"><a name="p146441863418"></a><a name="p146441863418"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row116431161949"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p16441361648"><a name="p16441361648"></a><a name="p16441361648"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p1364466842"><a name="p1364466842"></a><a name="p1364466842"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p2645136449"><a name="p2645136449"></a><a name="p2645136449"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p196451361745"><a name="p196451361745"></a><a name="p196451361745"></a>项目ID，获取方法请参考<a href="https://support.huaweicloud.com/api-live/live_03_0023.html" target="_blank" rel="noopener noreferrer">获取项目ID</a>。</p>
</td>
</tr>
</tbody>
</table>

## 请求参数<a name="section43585034150255"></a>

**表 2**  请求Header参数

<a name="HeaderParameter"></a>
<table><thead align="left"><tr id="row186451961042"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p164612619411"><a name="p164612619411"></a><a name="p164612619411"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.2"><p id="p166461613419"><a name="p166461613419"></a><a name="p166461613419"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p7646569412"><a name="p7646569412"></a><a name="p7646569412"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p1764726742"><a name="p1764726742"></a><a name="p1764726742"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row16458614416"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p964766744"><a name="p964766744"></a><a name="p964766744"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p1464710610411"><a name="p1464710610411"></a><a name="p1464710610411"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p1364714615420"><a name="p1364714615420"></a><a name="p1364714615420"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p1664786346"><a name="p1664786346"></a><a name="p1664786346"></a>用户Token。 通过调用IAM服务获取用户Token接口获取（响应消息头中X-Subject-Token的值）。</p>
</td>
</tr>
</tbody>
</table>

**表 3**  请求Body参数

<a name="table1611677387150255"></a>
<table><thead align="left"><tr id="row18956075150255"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p25492714614"><a name="p25492714614"></a><a name="p25492714614"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.2"><p id="p15462718615"><a name="p15462718615"></a><a name="p15462718615"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p6540277613"><a name="p6540277613"></a><a name="p6540277613"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p454027364"><a name="p454027364"></a><a name="p454027364"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row130506899150255"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p126233711611"><a name="p126233711611"></a><a name="p126233711611"></a>domain</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p106220375617"><a name="p106220375617"></a><a name="p106220375617"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p13626378616"><a name="p13626378616"></a><a name="p13626378616"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p9621637862"><a name="p9621637862"></a><a name="p9621637862"></a>直播播放域名</p>
</td>
</tr>
<tr id="row1356935934150255"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p86213371464"><a name="p86213371464"></a><a name="p86213371464"></a>app_name</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p136218371265"><a name="p136218371265"></a><a name="p136218371265"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p16629370616"><a name="p16629370616"></a><a name="p16629370616"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p186213371666"><a name="p186213371666"></a><a name="p186213371666"></a>应用名称。 默认为“live”，若您需要自定义应用名称，请先提交工单申请。</p>
</td>
</tr>
<tr id="row1252475580150255"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p1062103714618"><a name="p1062103714618"></a><a name="p1062103714618"></a>record_duration</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p2624371263"><a name="p2624371263"></a><a name="p2624371263"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p962143716614"><a name="p962143716614"></a><a name="p962143716614"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p662123716611"><a name="p662123716611"></a><a name="p662123716611"></a>秒，周期录制时常，最小15分钟，最大6小时，默认1小时</p>
</td>
</tr>
<tr id="row1875977008150255"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p206214379610"><a name="p206214379610"></a><a name="p206214379610"></a>record_format</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p1562637066"><a name="p1562637066"></a><a name="p1562637066"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p1762113711610"><a name="p1762113711610"></a><a name="p1762113711610"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p76211372617"><a name="p76211372617"></a><a name="p76211372617"></a>录制格式flv，hls，mp4，默认flv（目前仅支持flv）</p>
</td>
</tr>
<tr id="row23281447141412"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p1163537168"><a name="p1163537168"></a><a name="p1163537168"></a>record_location</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p8631837063"><a name="p8631837063"></a><a name="p8631837063"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p86363716610"><a name="p86363716610"></a><a name="p86363716610"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p1563143717618"><a name="p1563143717618"></a><a name="p1563143717618"></a>录制位置vod， 默认vod（目前暂只支持vod）</p>
</td>
</tr>
<tr id="row526822841150255"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p463193714615"><a name="p463193714615"></a><a name="p463193714615"></a>record_prefix</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p10637371964"><a name="p10637371964"></a><a name="p10637371964"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p1634378612"><a name="p1634378612"></a><a name="p1634378612"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p26333711612"><a name="p26333711612"></a><a name="p26333711612"></a>录制文件前缀， DomainName，AppName，StreamName必须，默认{DomainName}/{AppName}/{StreamName}/{StartTime}-{EndTime}</p>
</td>
</tr>
<tr id="row303901714150255"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p17631737768"><a name="p17631737768"></a><a name="p17631737768"></a>create_time</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p86316379619"><a name="p86316379619"></a><a name="p86316379619"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p15639371464"><a name="p15639371464"></a><a name="p15639371464"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p166317378615"><a name="p166317378615"></a><a name="p166317378615"></a>录制配置创建时间，样例2020-02-14T10:45:16.947+08:00</p>
</td>
</tr>
</tbody>
</table>

## 响应参数<a name="section521917461185"></a>

**状态码为 400 时:**

**表 4**  响应Body参数

<a name="responseParameter"></a>
<table><thead align="left"><tr id="row167013617413"><th class="cellrowborder" valign="top" width="20.01%" id="mcps1.2.4.1.1"><p id="p1267111610417"><a name="p1267111610417"></a><a name="p1267111610417"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="19.99%" id="mcps1.2.4.1.2"><p id="p267176345"><a name="p267176345"></a><a name="p267176345"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p11672561841"><a name="p11672561841"></a><a name="p11672561841"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row146701061248"><td class="cellrowborder" valign="top" width="20.01%" headers="mcps1.2.4.1.1 "><p id="p17672261646"><a name="p17672261646"></a><a name="p17672261646"></a>error_code</p>
</td>
<td class="cellrowborder" valign="top" width="19.99%" headers="mcps1.2.4.1.2 "><p id="p3672862044"><a name="p3672862044"></a><a name="p3672862044"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p11672136946"><a name="p11672136946"></a><a name="p11672136946"></a>错误码</p>
</td>
</tr>
<tr id="row18671161415"><td class="cellrowborder" valign="top" width="20.01%" headers="mcps1.2.4.1.1 "><p id="p7672764411"><a name="p7672764411"></a><a name="p7672764411"></a>error_msg</p>
</td>
<td class="cellrowborder" valign="top" width="19.99%" headers="mcps1.2.4.1.2 "><p id="p10673136149"><a name="p10673136149"></a><a name="p10673136149"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p126731960411"><a name="p126731960411"></a><a name="p126731960411"></a>错误描述</p>
</td>
</tr>
</tbody>
</table>

## 请求示例<a name="section1636560210150255"></a>

```
POST https://{endpoint}/v1/{project_id}/record/config  
{
   "domain" : "play.example.huawei.com",
   "app_name" : "live",
   "record_duration" : 900,
   "record_format" : "flv",
   "record_location" : "vod",
   "record_prefix" : "{DomainName}/{AppName}/{StreamName}/{StartTime}-{EndTime}" 
}
```

## 响应示例<a name="section17677268415"></a>

**状态码为 400 时:**

创建录制配置失败

```
{
  "error_code" : "LIVE.100011001",
  "error_msg" : "参数校验失败"
}
```

## 状态码<a name="section126786620414"></a>

<a name="table2790"></a>
<table><thead align="left"><tr id="row7678761845"><th class="cellrowborder" valign="top" width="15%" id="mcps1.1.3.1.1"><p id="p66791469412"><a name="p66791469412"></a><a name="p66791469412"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="85%" id="mcps1.1.3.1.2"><p id="p5679061143"><a name="p5679061143"></a><a name="p5679061143"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row3678161411"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.1.3.1.1 "><p id="p3679761143"><a name="p3679761143"></a><a name="p3679761143"></a>201</p>
</td>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.1.3.1.2 "><p id="p171821119109"><a name="p171821119109"></a><a name="p171821119109"></a>创建录制配置操作成功</p>
</td>
</tr>
<tr id="row146781361415"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.1.3.1.1 "><p id="p146801361849"><a name="p146801361849"></a><a name="p146801361849"></a>400</p>
</td>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.1.3.1.2 "><p id="p77188115106"><a name="p77188115106"></a><a name="p77188115106"></a>创建录制配置操作失败</p>
</td>
</tr>
</tbody>
</table>

## 错误码<a name="section146801461412"></a>

请参见[错误码](ErrorCode.md)。

