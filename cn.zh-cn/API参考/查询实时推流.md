# 查询实时推流<a name="QueryRealTimeStreamDetail"></a>

## 功能描述<a name="section599595742016"></a>

查询实时推流信息。

## 请求URI<a name="section199505732014"></a>

GET /v1/\{[project\_id](获取项目ID.md)\}/monitor/streams

## 请求参数<a name="section7171758192017"></a>

<a name="table194061581381"></a>
<table><thead align="left"><tr id="row74068863815"><th class="cellrowborder" valign="top" width="20.380000000000003%" id="mcps1.1.5.1.1"><p id="p11406118173814"><a name="p11406118173814"></a><a name="p11406118173814"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20.380000000000003%" id="mcps1.1.5.1.2"><p id="p240613873814"><a name="p240613873814"></a><a name="p240613873814"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50.949999999999996%" id="mcps1.1.5.1.3"><p id="p1406198193816"><a name="p1406198193816"></a><a name="p1406198193816"></a>描述</p>
</th>
<th class="cellrowborder" valign="top" width="8.290000000000001%" id="mcps1.1.5.1.4"><p id="p340610812385"><a name="p340610812385"></a><a name="p340610812385"></a>是否必选</p>
</th>
</tr>
</thead>
<tbody><tr id="row440628193815"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p154063813386"><a name="p154063813386"></a><a name="p154063813386"></a>domain_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p204067833820"><a name="p204067833820"></a><a name="p204067833820"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p485602275811"><a name="p485602275811"></a><a name="p485602275811"></a>推流域名。</p>
<p id="p24061581388"><a name="p24061581388"></a><a name="p24061581388"></a>如果不填写则查询租户下所有域名流信息。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p74064815380"><a name="p74064815380"></a><a name="p74064815380"></a>否</p>
</td>
</tr>
<tr id="row17406285383"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p640614883815"><a name="p640614883815"></a><a name="p640614883815"></a>app_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p174063833816"><a name="p174063833816"></a><a name="p174063833816"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p1640748143819"><a name="p1640748143819"></a><a name="p1640748143819"></a>应用名称。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p34061683382"><a name="p34061683382"></a><a name="p34061683382"></a>否</p>
</td>
</tr>
<tr id="row15407682382"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p104072813383"><a name="p104072813383"></a><a name="p104072813383"></a>stream_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p94079863814"><a name="p94079863814"></a><a name="p94079863814"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p114071582386"><a name="p114071582386"></a><a name="p114071582386"></a>直播流名称。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p2407108103820"><a name="p2407108103820"></a><a name="p2407108103820"></a>否</p>
</td>
</tr>
<tr id="row240848143813"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p24089812386"><a name="p24089812386"></a><a name="p24089812386"></a>node_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p17408983388"><a name="p17408983388"></a><a name="p17408983388"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p5408681389"><a name="p5408681389"></a><a name="p5408681389"></a>节点名称。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p840848173816"><a name="p840848173816"></a><a name="p840848173816"></a>否</p>
</td>
</tr>
<tr id="row740810853815"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p1240813823812"><a name="p1240813823812"></a><a name="p1240813823812"></a>offset</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p0408182381"><a name="p0408182381"></a><a name="p0408182381"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p13278171765012"><a name="p13278171765012"></a><a name="p13278171765012"></a>分页编号。</p>
<p id="p067251875010"><a name="p067251875010"></a><a name="p067251875010"></a>默认值：0。</p>
<p id="p74081981382"><a name="p74081981382"></a><a name="p74081981382"></a>指定stream_name时该参数无效。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p154081581388"><a name="p154081581388"></a><a name="p154081581388"></a>否</p>
</td>
</tr>
<tr id="row74087873812"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p54081483385"><a name="p54081483385"></a><a name="p54081483385"></a>limit</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p54081889383"><a name="p54081889383"></a><a name="p54081889383"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p5462114218501"><a name="p5462114218501"></a><a name="p5462114218501"></a>每页记录数。</p>
<p id="p1337844605013"><a name="p1337844605013"></a><a name="p1337844605013"></a><strong id="b127341323104117"><a name="b127341323104117"></a><a name="b127341323104117"></a>取值范围</strong>：[1,100]。</p>
<p id="p5360457105019"><a name="p5360457105019"></a><a name="p5360457105019"></a>默认值：10。</p>
<p id="p144089813813"><a name="p144089813813"></a><a name="p144089813813"></a>指定stream_name时该参数无效。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p174088813819"><a name="p174088813819"></a><a name="p174088813819"></a>否</p>
</td>
</tr>
</tbody>
</table>

## 请求样例<a name="section188424121984"></a>

```
GET /v1/{project_id}/monitor/streams?domain_name=example.huawei.com
```

## 返回参数<a name="section1322185811205"></a>

-   **查询实时推流成功**

    **表 1**  响应Body参数

    <a name="responseParameter"></a>
    <table><thead align="left"><tr id="row12313581200"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p1024185872014"><a name="p1024185872014"></a><a name="p1024185872014"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p2257586206"><a name="p2257586206"></a><a name="p2257586206"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p225145817203"><a name="p225145817203"></a><a name="p225145817203"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row72317584205"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p22514581203"><a name="p22514581203"></a><a name="p22514581203"></a>total</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p22612585205"><a name="p22612585205"></a><a name="p22612585205"></a>Long</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p8267586202"><a name="p8267586202"></a><a name="p8267586202"></a>实时推流总数。</p>
    </td>
    </tr>
    <tr id="row323858142017"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p327258122019"><a name="p327258122019"></a><a name="p327258122019"></a>stream_info_list</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p192718581208"><a name="p192718581208"></a><a name="p192718581208"></a>Array of <a href="#response_StreamInfo">StreamInfo</a> objects</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p02816583205"><a name="p02816583205"></a><a name="p02816583205"></a>推流信息列表。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 2**  StreamInfo

    <a name="response_StreamInfo"></a>
    <table><thead align="left"><tr id="row72914581203"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p63295872011"><a name="p63295872011"></a><a name="p63295872011"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p1632175892014"><a name="p1632175892014"></a><a name="p1632175892014"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p7338584208"><a name="p7338584208"></a><a name="p7338584208"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row12294588209"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p7333588201"><a name="p7333588201"></a><a name="p7333588201"></a>domain_name</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p9345586207"><a name="p9345586207"></a><a name="p9345586207"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p83417581200"><a name="p83417581200"></a><a name="p83417581200"></a>推流域名。</p>
    </td>
    </tr>
    <tr id="row529165811203"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1735195852016"><a name="p1735195852016"></a><a name="p1735195852016"></a>app_name</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p1135155832013"><a name="p1135155832013"></a><a name="p1135155832013"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p123655812204"><a name="p123655812204"></a><a name="p123655812204"></a>应用名称。</p>
    </td>
    </tr>
    <tr id="row172935882018"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p203720582200"><a name="p203720582200"></a><a name="p203720582200"></a>stream_name</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p1537135852010"><a name="p1537135852010"></a><a name="p1537135852010"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p93865892011"><a name="p93865892011"></a><a name="p93865892011"></a>直播流名称。</p>
    </td>
    </tr>
    <tr id="row42935832012"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p538185811203"><a name="p538185811203"></a><a name="p538185811203"></a>host_ip</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p133965817204"><a name="p133965817204"></a><a name="p133965817204"></a>Array of strings</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p2040185814202"><a name="p2040185814202"></a><a name="p2040185814202"></a>主播ip。</p>
    </td>
    </tr>
    <tr id="row133145810204"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1040145812012"><a name="p1040145812012"></a><a name="p1040145812012"></a>source_ip</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p841195822019"><a name="p841195822019"></a><a name="p841195822019"></a>Array of strings</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p14325142765819"><a name="p14325142765819"></a><a name="p14325142765819"></a>源站ip。</p>
    <p id="p7411658172010"><a name="p7411658172010"></a><a name="p7411658172010"></a>回客户源站场景下，客户源站地址。</p>
    </td>
    </tr>
    <tr id="row143145816209"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1642155852019"><a name="p1642155852019"></a><a name="p1642155852019"></a>start_time</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p174217588203"><a name="p174217588203"></a><a name="p174217588203"></a>Long</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p230253220588"><a name="p230253220588"></a><a name="p230253220588"></a>开播时间。</p>
    <p id="p1343165817202"><a name="p1343165817202"></a><a name="p1343165817202"></a>Unix时间戳，如1577894400。</p>
    </td>
    </tr>
    <tr id="row83145813204"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p144318587205"><a name="p144318587205"></a><a name="p144318587205"></a>acodec</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p2441858152014"><a name="p2441858152014"></a><a name="p2441858152014"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p4447586206"><a name="p4447586206"></a><a name="p4447586206"></a>音频编码。</p>
    </td>
    </tr>
    <tr id="row1031658192017"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p14485814201"><a name="p14485814201"></a><a name="p14485814201"></a>vcodec</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p6451758122015"><a name="p6451758122015"></a><a name="p6451758122015"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p154515842010"><a name="p154515842010"></a><a name="p154515842010"></a>视频编码。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   **查询实时推流失败**

    **表 3**  响应Body参数

    <a name="table11461758122011"></a>
    <table><thead align="left"><tr id="row104615811209"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p14785812012"><a name="p14785812012"></a><a name="p14785812012"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p8485586207"><a name="p8485586207"></a><a name="p8485586207"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p6488587202"><a name="p6488587202"></a><a name="p6488587202"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row11474588206"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1249145817207"><a name="p1249145817207"></a><a name="p1249145817207"></a>error_code</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p349958192015"><a name="p349958192015"></a><a name="p349958192015"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p185035822015"><a name="p185035822015"></a><a name="p185035822015"></a>错误码。</p>
    </td>
    </tr>
    <tr id="row1471158192016"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p125035802010"><a name="p125035802010"></a><a name="p125035802010"></a>error_msg</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p3511458172019"><a name="p3511458172019"></a><a name="p3511458172019"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p18517580200"><a name="p18517580200"></a><a name="p18517580200"></a>错误描述。</p>
    </td>
    </tr>
    </tbody>
    </table>


## 返回样例<a name="section87025822016"></a>

-   处理成功返回（返回200）

    ```
    {
      "total" : 1000,
      "stream_info_list" : [ {
        "domain_name" : "example-1.com",
        "app_name" : "live",
        "stream_name" : "test",
        "host_ip" : [ "127.0.0.1", "127.0.0.2" ],
        "source_ip" : [ "127.0.0.3", "127.0.0.4" ],
        "start_time" : 1577894400,
        "acodec" : "aac",
        "vcodec" : "h264"
      } ]
    }
    ```

-   处理失败返回（其他响应码，如返回400）

    ```
    {
      "error_code" : "LIVE.100011001",
      "error_msg" : "请求参数非法：domain_name。"
    }
    ```


## 状态码<a name="section68019585203"></a>

状态码请参见[状态码](状态码.md)。

## 错误码<a name="section18645817207"></a>

错误码请参见[错误码](https://apierrorcenter.developer.huaweicloud.com/apierrorcenter/errorcode?product=Live&locale=zh-cn)。

