# 查询拉流时间戳信息<a name="QuerySingleStreamTs"></a>

## 功能描述<a name="section162576252215"></a>

查询拉流时间戳信息接口。

最大查询跨度1天，最大查询周期7天。

## 请求URI<a name="section11258128229"></a>

GET /v1/\{[project\_id](获取项目ID.md)\}/stats/stream/timestamp

## 请求参数<a name="section1528018216220"></a>

<a name="table039816226404"></a>
<table><thead align="left"><tr id="row9398522124017"><th class="cellrowborder" valign="top" width="20.380000000000003%" id="mcps1.1.5.1.1"><p id="p20398112214016"><a name="p20398112214016"></a><a name="p20398112214016"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20.380000000000003%" id="mcps1.1.5.1.2"><p id="p18398132244018"><a name="p18398132244018"></a><a name="p18398132244018"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="50.949999999999996%" id="mcps1.1.5.1.3"><p id="p1739914224402"><a name="p1739914224402"></a><a name="p1739914224402"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="8.290000000000001%" id="mcps1.1.5.1.4"><p id="p1439811225405"><a name="p1439811225405"></a><a name="p1439811225405"></a>是否必选</p>
</th>
</tr>
</thead>
<tbody><tr id="row153992222400"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p173991222402"><a name="p173991222402"></a><a name="p173991222402"></a>domain_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p1439962214013"><a name="p1439962214013"></a><a name="p1439962214013"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p7399102224019"><a name="p7399102224019"></a><a name="p7399102224019"></a>播放域名。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p163991122154016"><a name="p163991122154016"></a><a name="p163991122154016"></a>是</p>
</td>
</tr>
<tr id="row9399422144016"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p33991622154010"><a name="p33991622154010"></a><a name="p33991622154010"></a>app_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p339922216406"><a name="p339922216406"></a><a name="p339922216406"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p17399102264014"><a name="p17399102264014"></a><a name="p17399102264014"></a>应用名称。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p20399102214405"><a name="p20399102214405"></a><a name="p20399102214405"></a>是</p>
</td>
</tr>
<tr id="row17399152214012"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p4399162254015"><a name="p4399162254015"></a><a name="p4399162254015"></a>stream_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p139916226409"><a name="p139916226409"></a><a name="p139916226409"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p1639902214014"><a name="p1639902214014"></a><a name="p1639902214014"></a>直播流名称。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p19399202224010"><a name="p19399202224010"></a><a name="p19399202224010"></a>是</p>
</td>
</tr>
<tr id="row23994228403"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p15399222174011"><a name="p15399222174011"></a><a name="p15399222174011"></a>type</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p639911228409"><a name="p639911228409"></a><a name="p639911228409"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p1639942213409"><a name="p1639942213409"></a><a name="p1639942213409"></a>查询的数据类型。</p>
<p id="p639912220406"><a name="p639912220406"></a><a name="p639912220406"></a>枚举值：</p>
<a name="ul193995228402"></a><a name="ul193995228402"></a><ul id="ul193995228402"><li>VideoFirstFrameTime</li><li>AudioFirstFrameTime</li><li>TimestampOffset</li></ul>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p83999222408"><a name="p83999222408"></a><a name="p83999222408"></a>否</p>
</td>
</tr>
<tr id="row11399522144017"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p133991222174017"><a name="p133991222174017"></a><a name="p133991222174017"></a>interval</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p7399112214405"><a name="p7399112214405"></a><a name="p7399112214405"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p88011929103511"><a name="p88011929103511"></a><a name="p88011929103511"></a>查询数据的时间粒度。</p>
<p id="p2399182219400"><a name="p2399182219400"></a><a name="p2399182219400"></a>可选值：60秒。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p12399522184010"><a name="p12399522184010"></a><a name="p12399522184010"></a>否</p>
</td>
</tr>
<tr id="row1639942217408"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p6399822134018"><a name="p6399822134018"></a><a name="p6399822134018"></a>start_time</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p1739982213409"><a name="p1739982213409"></a><a name="p1739982213409"></a>Long</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p18905193133518"><a name="p18905193133518"></a><a name="p18905193133518"></a>起始时间。</p>
<p id="p17400222114020"><a name="p17400222114020"></a><a name="p17400222114020"></a>Unix时间戳，默认查询最近1小时内的数据，如1577894400，最大查询跨度1天，最大查询周期7天。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p6399132218407"><a name="p6399132218407"></a><a name="p6399132218407"></a>否</p>
</td>
</tr>
<tr id="row104009224402"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p140042219402"><a name="p140042219402"></a><a name="p140042219402"></a>end_time</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p44008226404"><a name="p44008226404"></a><a name="p44008226404"></a>Long</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p1754713318354"><a name="p1754713318354"></a><a name="p1754713318354"></a>结束时间。</p>
<p id="p62313354359"><a name="p62313354359"></a><a name="p62313354359"></a>Unix时间戳，默认使用当前时间，如1577894400，最大查询跨度1天，最大查询周期7天的数据。</p>
<p id="p11400102210406"><a name="p11400102210406"></a><a name="p11400102210406"></a>结束时间需大于起始时间。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p15400172274010"><a name="p15400172274010"></a><a name="p15400172274010"></a>否</p>
</td>
</tr>
</tbody>
</table>

## 请求样例<a name="section579692011910"></a>

```
GET /v1/{project_id}/stats/stream/timestamp?app_name=live&stream_name=pull_stream&domain_name=example.huawei.com
```

## 返回参数<a name="section528632132211"></a>

-   **查询拉流时间戳信息成功**

    **表 1**  响应Body参数

    <a name="responseParameter"></a>
    <table><thead align="left"><tr id="row22874217225"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p82881827223"><a name="p82881827223"></a><a name="p82881827223"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p72883262215"><a name="p72883262215"></a><a name="p72883262215"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p1928913216229"><a name="p1928913216229"></a><a name="p1928913216229"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row16287162112210"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p129016210227"><a name="p129016210227"></a><a name="p129016210227"></a>data_list</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p22903232210"><a name="p22903232210"></a><a name="p22903232210"></a>Array of <a href="#response_TimestampData">TimestampData</a> objects</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p9291127223"><a name="p9291127223"></a><a name="p9291127223"></a>采样数据列表。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 2**  TimestampData

    <a name="response_TimestampData"></a>
    <table><thead align="left"><tr id="row0291923222"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p102929214226"><a name="p102929214226"></a><a name="p102929214226"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p5293923228"><a name="p5293923228"></a><a name="p5293923228"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p2029317282215"><a name="p2029317282215"></a><a name="p2029317282215"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row329110272213"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1329419219224"><a name="p1329419219224"></a><a name="p1329419219224"></a>timestamp</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p8294192202213"><a name="p8294192202213"></a><a name="p8294192202213"></a>Long</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p853750133720"><a name="p853750133720"></a><a name="p853750133720"></a>采样时间。</p>
    <p id="p829411217222"><a name="p829411217222"></a><a name="p829411217222"></a>Unix时间戳，如1577894400。</p>
    </td>
    </tr>
    <tr id="row112924216223"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1129512212210"><a name="p1129512212210"></a><a name="p1129512212210"></a>value</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p192951923221"><a name="p192951923221"></a><a name="p192951923221"></a>Double</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p2029517222211"><a name="p2029517222211"></a><a name="p2029517222211"></a>时间或时间戳差值。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   **查询拉流时间戳信息失败**

    **表 3**  响应Body参数

    <a name="table132961210223"></a>
    <table><thead align="left"><tr id="row102962217226"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p82971320227"><a name="p82971320227"></a><a name="p82971320227"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p11297423228"><a name="p11297423228"></a><a name="p11297423228"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p13298202162215"><a name="p13298202162215"></a><a name="p13298202162215"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row15296724227"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p5298152182217"><a name="p5298152182217"></a><a name="p5298152182217"></a>error_code</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p42992214220"><a name="p42992214220"></a><a name="p42992214220"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p6299182192216"><a name="p6299182192216"></a><a name="p6299182192216"></a>错误码。</p>
    </td>
    </tr>
    <tr id="row4296132192214"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1129920272218"><a name="p1129920272218"></a><a name="p1129920272218"></a>error_msg</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p1430002102217"><a name="p1430002102217"></a><a name="p1430002102217"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p93001282220"><a name="p93001282220"></a><a name="p93001282220"></a>错误描述。</p>
    </td>
    </tr>
    </tbody>
    </table>


## 返回样例<a name="section53019232211"></a>

-   处理成功返回（返回200）

    ```
    {
      "data_list" : [ {
        "value" : 50,
        "timestamp" : 1577894400
      }, {
        "value" : 86,
        "timestamp" : 1577862340
      } ]
    }
    ```

-   处理失败返回（其他响应码，如返回400）

    ```
    {
      "error_code" : "LIVE.100011001",
      "error_msg" : "请求参数非法：domain_name。"
    }
    ```


## 状态码<a name="section530632142217"></a>

状态码请参见[状态码](状态码.md)。

## 错误码<a name="section0310152162214"></a>

错误码请参见[错误码](https://apierrorcenter.developer.huaweicloud.com/apierrorcenter/errorcode?product=Live&locale=zh-cn)。

