# 查询播放带宽趋势<a name="QueryBandwidthOfStream"></a>

## 功能描述<a name="section012812293212"></a>

查询播放带宽趋势。

最大查询跨度7天，最大查询周期90天。

## 请求URI<a name="section912919294213"></a>

GET /v1/\{[project\_id](获取项目ID.md)\}/stats/stream/bandwidth

## 请求参数<a name="section314132913218"></a>

<a name="table1962211163913"></a>
<table><thead align="left"><tr id="row1562219113396"><th class="cellrowborder" valign="top" width="20.380000000000003%" id="mcps1.1.5.1.1"><p id="p146222116399"><a name="p146222116399"></a><a name="p146222116399"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20.380000000000003%" id="mcps1.1.5.1.2"><p id="p116224193914"><a name="p116224193914"></a><a name="p116224193914"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="50.949999999999996%" id="mcps1.1.5.1.3"><p id="p662211118393"><a name="p662211118393"></a><a name="p662211118393"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="8.290000000000001%" id="mcps1.1.5.1.4"><p id="p1662212173914"><a name="p1662212173914"></a><a name="p1662212173914"></a>是否必选</p>
</th>
</tr>
</thead>
<tbody><tr id="row962312103916"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p166231515396"><a name="p166231515396"></a><a name="p166231515396"></a>domain_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p146238153917"><a name="p146238153917"></a><a name="p146238153917"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p136239173914"><a name="p136239173914"></a><a name="p136239173914"></a>域名。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p462314153917"><a name="p462314153917"></a><a name="p462314153917"></a>是</p>
</td>
</tr>
<tr id="row136231616395"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p2623161193912"><a name="p2623161193912"></a><a name="p2623161193912"></a>app_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p1762318114398"><a name="p1762318114398"></a><a name="p1762318114398"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p186230173912"><a name="p186230173912"></a><a name="p186230173912"></a>应用名称。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p862381173916"><a name="p862381173916"></a><a name="p862381173916"></a>是</p>
</td>
</tr>
<tr id="row662315117397"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p1462319133914"><a name="p1462319133914"></a><a name="p1462319133914"></a>stream_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p56234123913"><a name="p56234123913"></a><a name="p56234123913"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p136238115395"><a name="p136238115395"></a><a name="p136238115395"></a>直播流名称。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p106237163915"><a name="p106237163915"></a><a name="p106237163915"></a>是</p>
</td>
</tr>
<tr id="row1562315133910"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p56238118395"><a name="p56238118395"></a><a name="p56238118395"></a>isp</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p2062314115390"><a name="p2062314115390"></a><a name="p2062314115390"></a>ARRAY</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p762319115395"><a name="p762319115395"></a><a name="p762319115395"></a>运营商列表，取值如下：</p>
<a name="ul13623511395"></a><a name="ul13623511395"></a><ul id="ul13623511395"><li>"BGP：BGP"。</li><li>"CMCC ：移动"。</li><li>"CT ： 电信"。</li><li>"CUCC ：联通"。</li><li>"SSP：小运营商"。</li><li>"OT：其他"。</li></ul>
<p id="p36233173920"><a name="p36233173920"></a><a name="p36233173920"></a>不填写则查询所有运营商。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p062331163919"><a name="p062331163919"></a><a name="p062331163919"></a>否</p>
</td>
</tr>
<tr id="row6623314392"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p176249110392"><a name="p176249110392"></a><a name="p176249110392"></a>state</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p15624191133915"><a name="p15624191133915"></a><a name="p15624191133915"></a>ARRAY</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p262413173912"><a name="p262413173912"></a><a name="p262413173912"></a>区域列表。<a href="省份名称缩写.md">取值参考</a>，不填写则查询所有区域。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p662415116398"><a name="p662415116398"></a><a name="p662415116398"></a>否</p>
</td>
</tr>
<tr id="row262410173915"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p362415133917"><a name="p362415133917"></a><a name="p362415133917"></a>interval</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p106245173911"><a name="p106245173911"></a><a name="p106245173911"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p10913115212617"><a name="p10913115212617"></a><a name="p10913115212617"></a>查询数据的时间粒度，支持设置为60或300秒。</p>
<p id="p1115319311307"><a name="p1115319311307"></a><a name="p1115319311307"></a>默认值：60。</p>
<p id="p17624413398"><a name="p17624413398"></a><a name="p17624413398"></a>不传值时，使用默认值60秒。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p1862481203917"><a name="p1862481203917"></a><a name="p1862481203917"></a>否</p>
</td>
</tr>
<tr id="row4624912396"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p13624512396"><a name="p13624512396"></a><a name="p13624512396"></a>start_time</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p4624131113913"><a name="p4624131113913"></a><a name="p4624131113913"></a>Long</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p108711555763"><a name="p108711555763"></a><a name="p108711555763"></a>起始时间。</p>
<p id="p1462471203911"><a name="p1462471203911"></a><a name="p1462471203911"></a>Unix时间戳，默认查询最近1天内的数据，如1577894400，最大查询跨度7天，最大查询周期90天。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p562412117392"><a name="p562412117392"></a><a name="p562412117392"></a>否</p>
</td>
</tr>
<tr id="row262491103917"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p176246123917"><a name="p176246123917"></a><a name="p176246123917"></a>end_time</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p96244111396"><a name="p96244111396"></a><a name="p96244111396"></a>Long</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p365872772"><a name="p365872772"></a><a name="p365872772"></a>结束时间。</p>
<p id="p819122418308"><a name="p819122418308"></a><a name="p819122418308"></a>Unix时间戳，默认使用当前时间，如1577894400，最大查询跨度7天，最大查询周期90天的数据。</p>
<p id="p8624191133910"><a name="p8624191133910"></a><a name="p8624191133910"></a>结束时间需大于起始时间。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p86241412398"><a name="p86241412398"></a><a name="p86241412398"></a>否</p>
</td>
</tr>
</tbody>
</table>

## 请求样例<a name="section17220838483"></a>

```
GET /v1/{project_id}/stats/stream/bandwidth?app_name=live&stream_name=pull_stream&domain_name=example.huawei.com
```

## 返回参数<a name="section5144202932112"></a>

-   **查询播放带宽趋势成功**

    **表 1**  响应Body参数

    <a name="responseParameter"></a>
    <table><thead align="left"><tr id="row1814432912117"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p151451429142118"><a name="p151451429142118"></a><a name="p151451429142118"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p1014512294212"><a name="p1014512294212"></a><a name="p1014512294212"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p8146192982111"><a name="p8146192982111"></a><a name="p8146192982111"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row12145162917216"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p19147132952117"><a name="p19147132952117"></a><a name="p19147132952117"></a>data_list</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p7147029152118"><a name="p7147029152118"></a><a name="p7147029152118"></a>Array of <a href="#response_BandwidthTimestampData">BandwidthTimestampData</a> objects</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p714710299214"><a name="p714710299214"></a><a name="p714710299214"></a>采样数据列表。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 2**  BandwidthTimestampData

    <a name="response_BandwidthTimestampData"></a>
    <table><thead align="left"><tr id="row5148929142113"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p1414832918212"><a name="p1414832918212"></a><a name="p1414832918212"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p7148162915215"><a name="p7148162915215"></a><a name="p7148162915215"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p15149329162116"><a name="p15149329162116"></a><a name="p15149329162116"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row13148102942111"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p21491829182113"><a name="p21491829182113"></a><a name="p21491829182113"></a>timestamp</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p214932914212"><a name="p214932914212"></a><a name="p214932914212"></a>Long</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p41359264819"><a name="p41359264819"></a><a name="p41359264819"></a>采样时间。</p>
    <p id="p181491729132117"><a name="p181491729132117"></a><a name="p181491729132117"></a>Unix时间戳，如1577894400。</p>
    </td>
    </tr>
    <tr id="row15148129152113"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p171492029162112"><a name="p171492029162112"></a><a name="p171492029162112"></a>value</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p14150162918219"><a name="p14150162918219"></a><a name="p14150162918219"></a>Long</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p2859142963010"><a name="p2859142963010"></a><a name="p2859142963010"></a>采样值。</p>
    <p id="p131501029192112"><a name="p131501029192112"></a><a name="p131501029192112"></a>单位为bps。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   **查询播放带宽趋势失败**

    **表 3**  响应Body参数

    <a name="table915082917218"></a>
    <table><thead align="left"><tr id="row1015082913212"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p131511529182116"><a name="p131511529182116"></a><a name="p131511529182116"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p01511029142114"><a name="p01511029142114"></a><a name="p01511029142114"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p151517296216"><a name="p151517296216"></a><a name="p151517296216"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row215022918219"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1515212916216"><a name="p1515212916216"></a><a name="p1515212916216"></a>error_code</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p11152162912111"><a name="p11152162912111"></a><a name="p11152162912111"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p151521329142115"><a name="p151521329142115"></a><a name="p151521329142115"></a>错误码。</p>
    </td>
    </tr>
    <tr id="row1215011299218"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p91529298214"><a name="p91529298214"></a><a name="p91529298214"></a>error_msg</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p19153162982117"><a name="p19153162982117"></a><a name="p19153162982117"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p31531529172112"><a name="p31531529172112"></a><a name="p31531529172112"></a>错误描述。</p>
    </td>
    </tr>
    </tbody>
    </table>


## 返回样例<a name="section151541729152112"></a>

-   处理成功返回（返回200）

    ```
    {
      "data_list" : [ {
        "value" : 50,
        "timestamp" : 1577894400
      }, {
        "value" : 86,
        "timestamp" : 1577862340
      } ]
    }
    ```

-   处理失败返回（其他响应码，如返回400）

    ```
    {
      "error_code" : "LIVE.100011001",
      "error_msg" : "请求参数非法：domain_name。"
    }
    ```


## 状态码<a name="section14156929162112"></a>

状态码请参见[状态码](状态码.md)。

## 错误码<a name="section10158529102115"></a>

错误码请参见[错误码](https://apierrorcenter.developer.huaweicloud.com/apierrorcenter/errorcode?product=Live&locale=zh-cn)。

