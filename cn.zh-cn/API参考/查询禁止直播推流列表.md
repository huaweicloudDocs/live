# 查询禁止直播推流列表<a name="topic_retrieveStreamForbidden"></a>

## 功能介绍<a name="section183951443123615"></a>

查询禁推黑名单列表

## 调试<a name="section163951743183618"></a>

您可以在[API Explorer](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=Live&api=ListStreamForbidden)中调试该接口。

## URI<a name="section93961543163614"></a>

GET /v1/\{project\_id\}/stream/blocks

**表 1**  路径参数

<a name="table4397343113616"></a>
<table><thead align="left"><tr id="row339713434365"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p10397343133615"><a name="p10397343133615"></a><a name="p10397343133615"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.2"><p id="p339874363611"><a name="p339874363611"></a><a name="p339874363611"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p2398134312368"><a name="p2398134312368"></a><a name="p2398134312368"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p1639884315361"><a name="p1639884315361"></a><a name="p1639884315361"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row63971443183620"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p8399194393612"><a name="p8399194393612"></a><a name="p8399194393612"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p63991943153618"><a name="p63991943153618"></a><a name="p63991943153618"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p83991743153610"><a name="p83991743153610"></a><a name="p83991743153610"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p8400543183614"><a name="p8400543183614"></a><a name="p8400543183614"></a>项目ID，获取方法请参考<a href="https://support.huaweicloud.com/api-live/live_03_0023.html" target="_blank" rel="noopener noreferrer">获取项目ID</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 2**  Query参数

<a name="table164017436362"></a>
<table><thead align="left"><tr id="row54008432369"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p24011643193614"><a name="p24011643193614"></a><a name="p24011643193614"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.2"><p id="p1401134316364"><a name="p1401134316364"></a><a name="p1401134316364"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p4402543193612"><a name="p4402543193612"></a><a name="p4402543193612"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p2402164373620"><a name="p2402164373620"></a><a name="p2402164373620"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row14007431366"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p340254312366"><a name="p340254312366"></a><a name="p340254312366"></a>domain</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p204031343173610"><a name="p204031343173610"></a><a name="p204031343173610"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p440344343614"><a name="p440344343614"></a><a name="p440344343614"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p840314436368"><a name="p840314436368"></a><a name="p840314436368"></a>播放或推流域名</p>
</td>
</tr>
<tr id="row11400174353615"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p4404184363611"><a name="p4404184363611"></a><a name="p4404184363611"></a>app_name</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p24041843103610"><a name="p24041843103610"></a><a name="p24041843103610"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p140416437365"><a name="p140416437365"></a><a name="p140416437365"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p20405164310367"><a name="p20405164310367"></a><a name="p20405164310367"></a>应用名称，不指定则查询domain下所有应用的禁止直播推流信息</p>
</td>
</tr>
<tr id="row1740044313610"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p11405134316361"><a name="p11405134316361"></a><a name="p11405134316361"></a>stream_name</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p64051343183618"><a name="p64051343183618"></a><a name="p64051343183618"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p740684312364"><a name="p740684312364"></a><a name="p740684312364"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p340624319368"><a name="p340624319368"></a><a name="p340624319368"></a>流名称</p>
</td>
</tr>
<tr id="row94013436369"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p6406543173616"><a name="p6406543173616"></a><a name="p6406543173616"></a>page</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p134071243113613"><a name="p134071243113613"></a><a name="p134071243113613"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p1140714436363"><a name="p1140714436363"></a><a name="p1140714436363"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p040784353614"><a name="p040784353614"></a><a name="p040784353614"></a>分页编号。 默认为0。</p>
</td>
</tr>
<tr id="row940115439365"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p114082043163617"><a name="p114082043163617"></a><a name="p114082043163617"></a>size</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p9408943183610"><a name="p9408943183610"></a><a name="p9408943183610"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p2408174318369"><a name="p2408174318369"></a><a name="p2408174318369"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p1409134313366"><a name="p1409134313366"></a><a name="p1409134313366"></a>每页记录数。</p>
<p id="p1140974323612"><a name="p1140974323612"></a><a name="p1140974323612"></a>取值范围：1-100。</p>
<p id="p1240912435361"><a name="p1240912435361"></a><a name="p1240912435361"></a>默认为10。</p>
</td>
</tr>
</tbody>
</table>

## 请求参数<a name="section1040924318361"></a>

**表 3**  请求Header参数

<a name="HeaderParameter"></a>
<table><thead align="left"><tr id="row5410184316366"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p241144311363"><a name="p241144311363"></a><a name="p241144311363"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.2"><p id="p1241134303618"><a name="p1241134303618"></a><a name="p1241134303618"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p15411114310367"><a name="p15411114310367"></a><a name="p15411114310367"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p341219435362"><a name="p341219435362"></a><a name="p341219435362"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1841084373615"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p19412143113616"><a name="p19412143113616"></a><a name="p19412143113616"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p1941244312365"><a name="p1941244312365"></a><a name="p1941244312365"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p841314318368"><a name="p841314318368"></a><a name="p841314318368"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p0413343173618"><a name="p0413343173618"></a><a name="p0413343173618"></a>用户Token。 通过调用IAM服务获取用户Token接口获取（响应消息头中X-Subject-Token的值）。</p>
</td>
</tr>
</tbody>
</table>

## 响应参数<a name="section64139431361"></a>

**状态码为 200 时:**

**表 4**  响应Body参数

<a name="responseParameter"></a>
<table><thead align="left"><tr id="row64141243193610"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p5415154333620"><a name="p5415154333620"></a><a name="p5415154333620"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p5415543193614"><a name="p5415543193614"></a><a name="p5415543193614"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p1341611436364"><a name="p1341611436364"></a><a name="p1341611436364"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row10414104333616"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1541604333616"><a name="p1541604333616"></a><a name="p1541604333616"></a>total</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p7416134323612"><a name="p7416134323612"></a><a name="p7416134323612"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p1641634315363"><a name="p1641634315363"></a><a name="p1641634315363"></a>查询结果的总元素数量</p>
</td>
</tr>
<tr id="row154141743163612"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p4417134353610"><a name="p4417134353610"></a><a name="p4417134353610"></a>blocks</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p124179434362"><a name="p124179434362"></a><a name="p124179434362"></a>Array of <a href="#response_StreamForbiddenList">StreamForbiddenList</a> objects</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p16418124303617"><a name="p16418124303617"></a><a name="p16418124303617"></a>禁推黑名单列表</p>
</td>
</tr>
</tbody>
</table>

**表 5**  StreamForbiddenList

<a name="response_StreamForbiddenList"></a>
<table><thead align="left"><tr id="row6418743123613"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p17419184315368"><a name="p17419184315368"></a><a name="p17419184315368"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p10419104363619"><a name="p10419104363619"></a><a name="p10419104363619"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p541920434367"><a name="p541920434367"></a><a name="p541920434367"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row94181343193610"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p16420184311365"><a name="p16420184311365"></a><a name="p16420184311365"></a>app_name</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p34201543103616"><a name="p34201543103616"></a><a name="p34201543103616"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p2420184323619"><a name="p2420184323619"></a><a name="p2420184323619"></a>应用名称</p>
</td>
</tr>
<tr id="row13418104333617"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p11421144313365"><a name="p11421144313365"></a><a name="p11421144313365"></a>stream_name</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p15421194353618"><a name="p15421194353618"></a><a name="p15421194353618"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p94211543193614"><a name="p94211543193614"></a><a name="p94211543193614"></a>流名称</p>
</td>
</tr>
<tr id="row941824318362"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p04227436366"><a name="p04227436366"></a><a name="p04227436366"></a>resume_time</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p642214431363"><a name="p642214431363"></a><a name="p642214431363"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p1942264313615"><a name="p1942264313615"></a><a name="p1942264313615"></a>恢复流时间，格式：yyyy-mm-ddThh:mm:ssZ，UTC时间，不指定则永久禁推</p>
</td>
</tr>
</tbody>
</table>

**状态码为 400 时:**

**表 6**  响应Body参数

<a name="table642364311365"></a>
<table><thead align="left"><tr id="row144231243183611"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p14424243153612"><a name="p14424243153612"></a><a name="p14424243153612"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p7424194316367"><a name="p7424194316367"></a><a name="p7424194316367"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p642414318369"><a name="p642414318369"></a><a name="p642414318369"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1742334315363"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p8425114343616"><a name="p8425114343616"></a><a name="p8425114343616"></a>error_code</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p4425043133615"><a name="p4425043133615"></a><a name="p4425043133615"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p54251443153612"><a name="p54251443153612"></a><a name="p54251443153612"></a>错误码</p>
</td>
</tr>
<tr id="row1842313434362"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p11426184373612"><a name="p11426184373612"></a><a name="p11426184373612"></a>error_msg</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p542624303611"><a name="p542624303611"></a><a name="p542624303611"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p7426743133620"><a name="p7426743133620"></a><a name="p7426743133620"></a>错误描述</p>
</td>
</tr>
</tbody>
</table>

## 请求示例<a name="section24271243183618"></a>

```
GET https://{endpoint}/v1/{project_id}/stream/blocks?domain=publish.example.huawei.com&app_name=live
```

## 响应示例<a name="section1542813430361"></a>

**状态码为 200 时:**

查询禁止直播推流列表成功

```
{
  "total" : 2,
  "blocks" : [ {
    "app_name" : "live",
    "stream_name" : "test_001",
    "resume_time" : "2018-05-19T21:10:15Z"
  }, {
    "app_name" : "live",
    "stream_name" : "test_002",
    "resume_time" : "2018-06-12T20:10:10Z"
  } ]
}
```

**状态码为 400 时:**

查询禁止直播推流列表失败

```
{
  "error_code" : "LIVE.100011001",
  "error_msg" : "Request Illegal"
}
```

## 状态码<a name="section184343437368"></a>

<a name="table2063"></a>
<table><thead align="left"><tr id="row144359436369"><th class="cellrowborder" valign="top" width="15%" id="mcps1.1.3.1.1"><p id="p184351343123615"><a name="p184351343123615"></a><a name="p184351343123615"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="85%" id="mcps1.1.3.1.2"><p id="p24367432364"><a name="p24367432364"></a><a name="p24367432364"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row74351943173616"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.1.3.1.1 "><p id="p16436443153612"><a name="p16436443153612"></a><a name="p16436443153612"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.1.3.1.2 "><p id="p943704333617"><a name="p943704333617"></a><a name="p943704333617"></a>查询禁止直播推流列表成功</p>
</td>
</tr>
<tr id="row124351943153617"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.1.3.1.1 "><p id="p5437114363613"><a name="p5437114363613"></a><a name="p5437114363613"></a>400</p>
</td>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.1.3.1.2 "><p id="p1043714312361"><a name="p1043714312361"></a><a name="p1043714312361"></a>查询禁止直播推流列表失败</p>
</td>
</tr>
</tbody>
</table>

## 错误码<a name="section443794311361"></a>

请参见[错误码](错误码.md)。

