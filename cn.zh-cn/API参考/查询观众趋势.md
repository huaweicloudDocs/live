# 查询观众趋势<a name="QueryUsersOfStream"></a>

## 功能描述<a name="section834320172118"></a>

查询观众趋势。

最大查询跨度7天，最大查询周期90天。

## 请求URI<a name="section5348200216"></a>

GET /v1/\{[project\_id](获取项目ID.md)\}/stats/stream/user

## 请求参数<a name="section550102082115"></a>

<a name="table15292193416386"></a>
<table><thead align="left"><tr id="row7292634163816"><th class="cellrowborder" valign="top" width="20.380000000000003%" id="mcps1.1.5.1.1"><p id="p12292634163810"><a name="p12292634163810"></a><a name="p12292634163810"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20.380000000000003%" id="mcps1.1.5.1.2"><p id="p1292183410389"><a name="p1292183410389"></a><a name="p1292183410389"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="50.949999999999996%" id="mcps1.1.5.1.3"><p id="p10292133433819"><a name="p10292133433819"></a><a name="p10292133433819"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="8.290000000000001%" id="mcps1.1.5.1.4"><p id="p1129223463818"><a name="p1129223463818"></a><a name="p1129223463818"></a>是否必选</p>
</th>
</tr>
</thead>
<tbody><tr id="row1929293423813"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p122921934103820"><a name="p122921934103820"></a><a name="p122921934103820"></a>domain_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p4292634153818"><a name="p4292634153818"></a><a name="p4292634153818"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p929319349387"><a name="p929319349387"></a><a name="p929319349387"></a>域名。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p52928342389"><a name="p52928342389"></a><a name="p52928342389"></a>是</p>
</td>
</tr>
<tr id="row18293143410387"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p1329393493812"><a name="p1329393493812"></a><a name="p1329393493812"></a>app_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p129353453819"><a name="p129353453819"></a><a name="p129353453819"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p17293153413389"><a name="p17293153413389"></a><a name="p17293153413389"></a>应用名称。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p92931234123814"><a name="p92931234123814"></a><a name="p92931234123814"></a>是</p>
</td>
</tr>
<tr id="row172931534143812"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p72931534133812"><a name="p72931534133812"></a><a name="p72931534133812"></a>stream_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p20293934173812"><a name="p20293934173812"></a><a name="p20293934173812"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p9293163413381"><a name="p9293163413381"></a><a name="p9293163413381"></a>直播流名称。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p1729315347386"><a name="p1729315347386"></a><a name="p1729315347386"></a>是</p>
</td>
</tr>
<tr id="row172930347383"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p4293163420388"><a name="p4293163420388"></a><a name="p4293163420388"></a>isp</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p14293163416381"><a name="p14293163416381"></a><a name="p14293163416381"></a>ARRAY</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p11293034173819"><a name="p11293034173819"></a><a name="p11293034173819"></a>运营商列表，取值如下：</p>
<a name="ul10293133415386"></a><a name="ul10293133415386"></a><ul id="ul10293133415386"><li>"BGP：BGP"。</li><li>"CMCC ：移动"。</li><li>"CT ： 电信"。</li><li>"CUCC ：联通"。</li><li>"SSP：小运营商"。</li><li>"OT：其他"。</li></ul>
<p id="p1629311345387"><a name="p1629311345387"></a><a name="p1629311345387"></a>不填写则查询所有运营商。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p829313463817"><a name="p829313463817"></a><a name="p829313463817"></a>否</p>
</td>
</tr>
<tr id="row1229323493811"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p329317345387"><a name="p329317345387"></a><a name="p329317345387"></a>state</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p18293153413817"><a name="p18293153413817"></a><a name="p18293153413817"></a>ARRAY</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p1329312344384"><a name="p1329312344384"></a><a name="p1329312344384"></a>区域列表。<a href="省份名称缩写.md">取值参考</a>，不填写则查询所有区域。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p1829313483814"><a name="p1829313483814"></a><a name="p1829313483814"></a>否</p>
</td>
</tr>
<tr id="row429318348386"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p162934340384"><a name="p162934340384"></a><a name="p162934340384"></a>interval</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p62938341389"><a name="p62938341389"></a><a name="p62938341389"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p23803710587"><a name="p23803710587"></a><a name="p23803710587"></a>查询数据的时间粒度，支持设置为60或300秒。</p>
<p id="p185421257112815"><a name="p185421257112815"></a><a name="p185421257112815"></a>默认值：60。</p>
<p id="p1629311349382"><a name="p1629311349382"></a><a name="p1629311349382"></a>不传值时，使用默认值60秒。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p129313420388"><a name="p129313420388"></a><a name="p129313420388"></a>否</p>
</td>
</tr>
<tr id="row1229313433814"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p15293133411382"><a name="p15293133411382"></a><a name="p15293133411382"></a>start_time</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p9294113493819"><a name="p9294113493819"></a><a name="p9294113493819"></a>Long</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p139921155813"><a name="p139921155813"></a><a name="p139921155813"></a>起始时间。</p>
<p id="p4294133443815"><a name="p4294133443815"></a><a name="p4294133443815"></a>Unix时间戳，默认查询最近1天内的数据，如1577894400，最大查询跨度7天，最大查询周期90天。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p172935349384"><a name="p172935349384"></a><a name="p172935349384"></a>否</p>
</td>
</tr>
<tr id="row18294134113815"><td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.1 "><p id="p19294193483819"><a name="p19294193483819"></a><a name="p19294193483819"></a>end_time</p>
</td>
<td class="cellrowborder" valign="top" width="20.380000000000003%" headers="mcps1.1.5.1.2 "><p id="p14294113419386"><a name="p14294113419386"></a><a name="p14294113419386"></a>Long</p>
</td>
<td class="cellrowborder" valign="top" width="50.949999999999996%" headers="mcps1.1.5.1.3 "><p id="p1730115010589"><a name="p1730115010589"></a><a name="p1730115010589"></a>结束时间。</p>
<p id="p202563290291"><a name="p202563290291"></a><a name="p202563290291"></a>Unix时间戳，默认使用当前时间，如1577894400，最大查询跨度7天，最大查询周期90天的数据。</p>
<p id="p182941634113813"><a name="p182941634113813"></a><a name="p182941634113813"></a>结束时间需大于起始时间。</p>
</td>
<td class="cellrowborder" valign="top" width="8.290000000000001%" headers="mcps1.1.5.1.4 "><p id="p2029443453817"><a name="p2029443453817"></a><a name="p2029443453817"></a>否</p>
</td>
</tr>
</tbody>
</table>

## 请求样例<a name="section481110240811"></a>

```
GET /v1/{project_id}/stats/stream/user?app_name=live&stream_name=pull_stream&domain_name=example.huawei.com
```

## 返回参数<a name="section1053162014218"></a>

-   **查询观众趋势成功**

    **表 1**  响应Body参数

    <a name="responseParameter"></a>
    <table><thead align="left"><tr id="row754132042119"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p11544209216"><a name="p11544209216"></a><a name="p11544209216"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p15516203211"><a name="p15516203211"></a><a name="p15516203211"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p25542014215"><a name="p25542014215"></a><a name="p25542014215"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row1154152018212"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p165518203212"><a name="p165518203212"></a><a name="p165518203212"></a>data_list</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p1356112014213"><a name="p1356112014213"></a><a name="p1356112014213"></a>Array of <a href="#response_UserTimestampData">UserTimestampData</a> objects</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p85622020217"><a name="p85622020217"></a><a name="p85622020217"></a>观众数据列表。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 2**  UserTimestampData

    <a name="response_UserTimestampData"></a>
    <table><thead align="left"><tr id="row356152062111"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p1557152019217"><a name="p1557152019217"></a><a name="p1557152019217"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p957920192118"><a name="p957920192118"></a><a name="p957920192118"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p759620182119"><a name="p759620182119"></a><a name="p759620182119"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row205662012214"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p2601920192119"><a name="p2601920192119"></a><a name="p2601920192119"></a>timestamp</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p1601220162111"><a name="p1601220162111"></a><a name="p1601220162111"></a>Long</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p7229121418518"><a name="p7229121418518"></a><a name="p7229121418518"></a>采样时间。</p>
    <p id="p960182011213"><a name="p960182011213"></a><a name="p960182011213"></a>Unix时间戳，如1577894400。</p>
    </td>
    </tr>
    <tr id="row1656152092113"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p26072092118"><a name="p26072092118"></a><a name="p26072092118"></a>value</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p86192019215"><a name="p86192019215"></a><a name="p86192019215"></a>Long</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p1061112015211"><a name="p1061112015211"></a><a name="p1061112015211"></a>采样点观众数。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   **查询观众趋势失败**

    **表 3**  响应Body参数

    <a name="table46162072113"></a>
    <table><thead align="left"><tr id="row26122032116"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p1662220182118"><a name="p1662220182118"></a><a name="p1662220182118"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p14621220132113"><a name="p14621220132113"></a><a name="p14621220132113"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p862142011213"><a name="p862142011213"></a><a name="p862142011213"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row9611220182113"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p1263132017212"><a name="p1263132017212"></a><a name="p1263132017212"></a>error_code</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p106392092113"><a name="p106392092113"></a><a name="p106392092113"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p15631620152116"><a name="p15631620152116"></a><a name="p15631620152116"></a>错误码。</p>
    </td>
    </tr>
    <tr id="row116115207218"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p8641320122110"><a name="p8641320122110"></a><a name="p8641320122110"></a>error_msg</p>
    </td>
    <td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p1664192017216"><a name="p1664192017216"></a><a name="p1664192017216"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p1965152012216"><a name="p1965152012216"></a><a name="p1965152012216"></a>错误描述。</p>
    </td>
    </tr>
    </tbody>
    </table>


## 返回样例<a name="section19661920122118"></a>

-   处理成功返回（返回200）

    ```
    {
      "data_list" : [ {
        "value" : 50,
        "timestamp" : 1577894400
      } ]
    }
    ```

-   处理失败返回（其他响应码，如返回400）

    ```
    {
      "error_code" : "LIVE.100011001",
      "error_msg" : "请求参数非法：domain_name。"
    }
    ```


## 状态码<a name="section66852013215"></a>

状态码请参见[状态码](状态码.md)。

## 错误码<a name="section1170420172116"></a>

错误码请参见[错误码](https://apierrorcenter.developer.huaweicloud.com/apierrorcenter/errorcode?product=Live&locale=zh-cn)。

