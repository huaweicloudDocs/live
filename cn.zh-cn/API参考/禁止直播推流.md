# 禁止直播推流<a name="live_03_0010"></a>

## 功能介绍<a name="section1130664310364"></a>

禁止直播推流

## 调试<a name="section10306194303610"></a>

您可以在[API Explorer](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=Live&api=CreateStreamForbidden)中调试该接口。

## URI<a name="section20307204343611"></a>

POST /v1/\{project\_id\}/stream/blocks

**表 1**  路径参数

<a name="table163096432368"></a>
<table><thead align="left"><tr id="row17309144316365"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p2031011430366"><a name="p2031011430366"></a><a name="p2031011430366"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.2"><p id="p13310194319362"><a name="p13310194319362"></a><a name="p13310194319362"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p11311104343615"><a name="p11311104343615"></a><a name="p11311104343615"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p193116438363"><a name="p193116438363"></a><a name="p193116438363"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row153092430369"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p183111743203615"><a name="p183111743203615"></a><a name="p183111743203615"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p931214435364"><a name="p931214435364"></a><a name="p931214435364"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p63121643153617"><a name="p63121643153617"></a><a name="p63121643153617"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p53131343183619"><a name="p53131343183619"></a><a name="p53131343183619"></a>项目ID，获取方法请参考<a href="https://support.huaweicloud.com/api-live/live_03_0023.html" target="_blank" rel="noopener noreferrer">获取项目ID</a>。</p>
</td>
</tr>
</tbody>
</table>

## 请求参数<a name="section10313943143610"></a>

**表 2**  请求Header参数

<a name="HeaderParameter"></a>
<table><thead align="left"><tr id="row1231444318365"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p1031444312360"><a name="p1031444312360"></a><a name="p1031444312360"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.2"><p id="p331518436361"><a name="p331518436361"></a><a name="p331518436361"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p2031512431362"><a name="p2031512431362"></a><a name="p2031512431362"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p103151743183611"><a name="p103151743183611"></a><a name="p103151743183611"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row9314143203616"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p143164431366"><a name="p143164431366"></a><a name="p143164431366"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p183167431369"><a name="p183167431369"></a><a name="p183167431369"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p1331674323614"><a name="p1331674323614"></a><a name="p1331674323614"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p10317243113617"><a name="p10317243113617"></a><a name="p10317243113617"></a>用户Token。 通过调用IAM服务获取用户Token接口获取（响应消息头中X-Subject-Token的值）。</p>
</td>
</tr>
</tbody>
</table>

**表 3**  请求Body参数

<a name="requestParameter"></a>
<table><thead align="left"><tr id="row113178432367"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p18318134312364"><a name="p18318134312364"></a><a name="p18318134312364"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10%" id="mcps1.2.5.1.2"><p id="p1431844363615"><a name="p1431844363615"></a><a name="p1431844363615"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p231820432362"><a name="p231820432362"></a><a name="p231820432362"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p17319643133613"><a name="p17319643133613"></a><a name="p17319643133613"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1531710437364"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p93197433363"><a name="p93197433363"></a><a name="p93197433363"></a>domain</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p13319154318366"><a name="p13319154318366"></a><a name="p13319154318366"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p13201743183616"><a name="p13201743183616"></a><a name="p13201743183616"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p1832054313369"><a name="p1832054313369"></a><a name="p1832054313369"></a>直播播放域名或推流域名</p>
</td>
</tr>
<tr id="row931794353617"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p7320743203620"><a name="p7320743203620"></a><a name="p7320743203620"></a>app_name</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p113211243123617"><a name="p113211243123617"></a><a name="p113211243123617"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p2321164317361"><a name="p2321164317361"></a><a name="p2321164317361"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p18321104323613"><a name="p18321104323613"></a><a name="p18321104323613"></a>应用名称</p>
</td>
</tr>
<tr id="row1331794318365"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p43226431366"><a name="p43226431366"></a><a name="p43226431366"></a>stream_name</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p6322184310361"><a name="p6322184310361"></a><a name="p6322184310361"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p1332254313611"><a name="p1332254313611"></a><a name="p1332254313611"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p832274343611"><a name="p832274343611"></a><a name="p832274343611"></a>流名称</p>
</td>
</tr>
<tr id="row531714319368"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p153239433361"><a name="p153239433361"></a><a name="p153239433361"></a>resume_time</p>
</td>
<td class="cellrowborder" valign="top" width="10%" headers="mcps1.2.5.1.2 "><p id="p1332364373618"><a name="p1332364373618"></a><a name="p1332364373618"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p7323164313363"><a name="p7323164313363"></a><a name="p7323164313363"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p832464363611"><a name="p832464363611"></a><a name="p832464363611"></a>恢复流时间，格式：yyyy-mm-ddThh:mm:ssZ，UTC时间，不指定则永久禁推</p>
</td>
</tr>
</tbody>
</table>

## 响应参数<a name="section93241343163620"></a>

**状态码为 400 时:**

**表 4**  响应Body参数

<a name="responseParameter"></a>
<table><thead align="left"><tr id="row23252436367"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p9325543123613"><a name="p9325543123613"></a><a name="p9325543123613"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p20326114393616"><a name="p20326114393616"></a><a name="p20326114393616"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p14326843203611"><a name="p14326843203611"></a><a name="p14326843203611"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1325134343614"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p73261243103620"><a name="p73261243103620"></a><a name="p73261243103620"></a>error_code</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p17327114315363"><a name="p17327114315363"></a><a name="p17327114315363"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p18327443183613"><a name="p18327443183613"></a><a name="p18327443183613"></a>错误码</p>
</td>
</tr>
<tr id="row932524323616"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p143277433363"><a name="p143277433363"></a><a name="p143277433363"></a>error_msg</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p732844323619"><a name="p732844323619"></a><a name="p732844323619"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p103283438365"><a name="p103283438365"></a><a name="p103283438365"></a>错误描述</p>
</td>
</tr>
</tbody>
</table>

## 请求示例<a name="section1232814313367"></a>

```
POST https://{endpoint}/v1/{project_id}/stream/blocks

{
  "domain" : "publish.example.huawei.com",
  "app_name" : "live",
  "stream_name" : "huawei",
  "resume_time" : "2018-05-19T21:10:15Z"
}
```

## 响应示例<a name="section1733113437362"></a>

**状态码为 400 时:**

设置禁止直播推流操作失败

```
{
  "error_code" : "LIVE.100011001",
  "error_msg" : "Request Illegal"
}
```

## 状态码<a name="section1833314393614"></a>

<a name="table2062"></a>
<table><thead align="left"><tr id="row16334184312364"><th class="cellrowborder" valign="top" width="15%" id="mcps1.1.3.1.1"><p id="p23341943173611"><a name="p23341943173611"></a><a name="p23341943173611"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="85%" id="mcps1.1.3.1.2"><p id="p533411438369"><a name="p533411438369"></a><a name="p533411438369"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row13341643103614"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.1.3.1.1 "><p id="p9335194363611"><a name="p9335194363611"></a><a name="p9335194363611"></a>204</p>
</td>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.1.3.1.2 "><p id="p8335124313612"><a name="p8335124313612"></a><a name="p8335124313612"></a>设置禁止直播推流操作成功</p>
</td>
</tr>
<tr id="row43347439360"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.1.3.1.1 "><p id="p16335943203620"><a name="p16335943203620"></a><a name="p16335943203620"></a>400</p>
</td>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.1.3.1.2 "><p id="p1533684315362"><a name="p1533684315362"></a><a name="p1533684315362"></a>设置禁止直播推流操作失败</p>
</td>
</tr>
</tbody>
</table>

## 错误码<a name="section1033620434364"></a>

请参见[错误码](错误码.md)。

